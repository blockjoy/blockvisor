#Manual https://hub.cosmos.network/main/hub-tutorials/join-mainnet.html#General-Configuration

#NODE SPECS:
#Validator	32GB	500GB-2TB*
#Full	        16GB	2TB
#Default	16GB	1TB

application_name = "cosmos"
node_type = "node"
version = "7.1.0-build.1"

[image]
debian_version = "focal"
rootfs_size = "10G"
fs_type = "ext4"
apt_image = ["wget", "liblz4-tool", "aria2", "jq"]
apt_source = ["multiverse"]
cmds = [
  "systemctl disable systemd-resolved.service",
  "rm /etc/dhcp/dhclient-enter-hooks.d/resolved",
  "rm /etc/resolv.conf",
  "echo 'nameserver 8.8.8.8' > /etc/resolv.conf",
  "echo 'nameserver 1.1.1.1' >> /etc/resolv.conf",

  
] 

[build_machine]
apt_build_machine = []
git_repo = "https://github.com/cosmos/gaia.git"
git_tag = "v7.1.0"
build_cmds =  [
                "cp {{.YafimHome}}/babelsup/usr/bin/babelsup {{.YafimHome}}/target/cosmos/node/mnt/usr/bin/",
                "cp {{.YafimHome}}/babelsup/etc/systemd/system/babelsup.service {{.YafimHome}}/target/cosmos/node/mnt/etc/systemd/system/",
                "cp {{.YafimHome}}/babelsup/etc/systemd/system/multi-user.target.wants/babelsup.service {{.YafimHome}}/target/cosmos/node/mnt/etc/systemd/system/multi-user.target.wants/",
                "echo 'root:f&IS_rwh' | chpasswd -R {{.YafimHome}}/target/cosmos/node/mnt/",
                "echo cosmos > {{.YafimHome}}/target/cosmos/node/mnt/etc/hostname",
                "sudo apt update",
                "sudo apt install -y build-essential git binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ python libssl-dev pkg-config clang llvm",
		"cd {{.YafimHome}}/gaia && make build-linux",
		"cp {{.YafimHome}}/gaia/build/gaiad {{.YafimHome}}/target/cosmos/node/mnt/usr/bin/"
	      ]


